<description>Create a data factory workspace</description>
  <keepDependencies>false</keepDependencies>
  <properties>
    <hudson.security.AuthorizationMatrixProperty>
      <inheritanceStrategy class="org.jenkinsci.plugins.matrixauth.inheritance.InheritParentStrategy"/>   
      <permission>com.cloudbees.plugins.credentials.CredentialsProvider.Create:gdo_ca_pre_adm_full</permission>
      <permission>com.cloudbees.plugins.credentials.CredentialsProvider.Delete:gdo_ca_pre_adm_full</permission>
      <permission>com.cloudbees.plugins.credentials.CredentialsProvider.ManageDomains:gdo_ca_pre_adm_full</permission>
      <permission>com.cloudbees.plugins.credentials.CredentialsProvider.Update:gdo_ca_pre_adm_full</permission>
      <permission>com.cloudbees.plugins.credentials.CredentialsProvider.View:gdo_ca_pre_adm_full</permission>
      <permission>hudson.model.Item.Build:gdo_ca_pre_adm_full</permission>
      <permission>hudson.model.Item.Cancel:gdo_ca_pre_adm_full</permission>
      <permission>hudson.model.Item.Configure:gdo_ca_pre_adm_full</permission>
      <permission>hudson.model.Item.Delete:gdo_ca_pre_adm_full</permission>
      <permission>hudson.model.Item.Discover:gdo_ca_pre_adm_full</permission>
      <permission>hudson.model.Item.Move:gdo_ca_pre_adm_full</permission>
      <permission>hudson.model.Item.Read:gdo_ca_pre_adm_full</permission>
      <permission>hudson.model.Item.Workspace:gdo_ca_pre_adm_full</permission>
      <permission>hudson.model.Run.Delete:gdo_ca_pre_adm_full</permission>
      <permission>hudson.model.Run.Replay:gdo_ca_pre_adm_full</permission>
      <permission>hudson.model.Run.Update:gdo_ca_pre_adm_full</permission>
      <permission>hudson.scm.SCM.Tag:gdo_ca_pre_adm_full</permission>
    </hudson.security.AuthorizationMatrixProperty>
    <com.sonyericsson.rebuild.RebuildSettings plugin="rebuild@332.va_1ee476d8f6d">
      <autoRebuild>false</autoRebuild>
      <rebuildDisabled>false</rebuildDisabled>
    </com.sonyericsson.rebuild.RebuildSettings>
    <hudson.model.ParametersDefinitionProperty>
      <parameterDefinitions>
        <hudson.model.ChoiceParameterDefinition>
          <name>azure_subscription</name>
          <description>gdo-non-prod:  MFC-Global-Corp-DATAGROSS-EDL2-NonProduction-S1
gdo-prod:  MFC-Global-Corp-DATAGROSS-EDL2-Production-S1
gdcore-non-prod:  MFC-Global-Corp-CorporateSharedSvc-gdcore1-NonProduction-S1
gdcore-prod:  MFC-Global-Corp-CorporateSharedSvc-gdcore1-Production-S1
gft-nonprod: MFC-Global-Corp-CorporateSharedSvc-GFTSupp01-NonProduction-S1
gft-prod: MFC-Global-Corp-CorporateSharedSvc-GFTSupp01-Production-S1</description>
          <choices class="java.util.Arrays$ArrayList">
            <a class="string-array">
              <string>gdo-nonprod</string>
              <string>gdo-prod</string>
              <string>gdcore-nonprod</string>
              <string>gdcore-prod</string>
              <string>gdo-poc</string>
              <string>gddatalab</string>
              <string>gddatalab-East</string>
              <string>gft-nonprod</string>
              <string>gft-prod</string>
            </a>
          </choices>
        </hudson.model.ChoiceParameterDefinition>
        <com.cloudbees.plugins.credentials.CredentialsParameterDefinition plugin="credentials@1319.v7eb_51b_3a_c97b_">
          <name>spn_secret_param</name>
          <description>Secret of SPN for the Azure subscription</description>
          <defaultValue></defaultValue>
          <credentialType>org.jenkinsci.plugins.plaincredentials.impl.StringCredentialsImpl</credentialType>
          <required>false</required>
        </com.cloudbees.plugins.credentials.CredentialsParameterDefinition>
        <hudson.model.StringParameterDefinition>
          <name>aks_name</name>
          <description>AKS cluster name</description>
          <trim>false</trim>
        </hudson.model.StringParameterDefinition>
        <hudson.model.StringParameterDefinition>
          <name>resource_group</name>
          <description>Name of the resource group for data factory workspace</description>
          <trim>false</trim>
        </hudson.model.StringParameterDefinition>
        <hudson.model.ChoiceParameterDefinition>
          <name>location</name>
          <description>Azure region of AKS cluster. Primary site is Canada Central. DR site is Canada East</description>
          <choices class="java.util.Arrays$ArrayList">
            <a class="string-array">
              <string>canadacentral</string>
              <string>canadaeast</string>
            </a>
          </choices>
        </hudson.model.ChoiceParameterDefinition>
        <hudson.model.StringParameterDefinition>
          <name>aks_version</name>
          <description>Version of AKS cluster, current version is 1.23.8</description>
          <defaultValue>1.23.8</defaultValue>
          <trim>false</trim>
        </hudson.model.StringParameterDefinition>
        <hudson.model.StringParameterDefinition>
          <name>user_assigned_managed_id</name>
          <description>Managed identify for private AKS cluster</description>
          <trim>false</trim>
        </hudson.model.StringParameterDefinition>
        <hudson.model.StringParameterDefinition>
          <name>aks_vm_size</name>
          <description>VM size for the default node pool</description>
          <defaultValue>Standard_DS3_v2</defaultValue>
          <trim>false</trim>
        </hudson.model.StringParameterDefinition>
        <hudson.model.StringParameterDefinition>
          <name>aks_node_count</name>
          <description>number of nodes for the default node pool</description>
          <defaultValue>3</defaultValue>
          <trim>false</trim>
        </hudson.model.StringParameterDefinition>
        <hudson.model.StringParameterDefinition>
          <name>aks_max_node_count</name>
          <description>Max number of nodes for the default node pool</description>
          <defaultValue>3</defaultValue>
          <trim>false</trim>
        </hudson.model.StringParameterDefinition>
        <hudson.model.StringParameterDefinition>
          <name>aks_min_node_count</name>
          <description>min number of nodes for the default node pool</description>
          <defaultValue>3</defaultValue>
          <trim>false</trim>
        </hudson.model.StringParameterDefinition>
        <hudson.model.StringParameterDefinition>
          <name>aks_max_pod_count</name>
          <description>Max number of pods for a node. This parameter is for AKS CNI cluster</description> 
          <defaultValue>10</defaultValue>
          <trim>false</trim>
        </hudson.model.StringParameterDefinition>
        <hudson.model.ChoiceParameterDefinition>
          <name>aks_network_mode</name>
          <description>AKS network mode</description>
          <choices class="java.util.Arrays$ArrayList">
            <a class="string-array">
              <string>kubenet</string>
              <string>cni</string>
            </a>
          </choices>
        </hudson.model.ChoiceParameterDefinition>
        <hudson.model.StringParameterDefinition>
          <name>aks_subnet</name>
          <description>Subnet name of AKS network</description>
          <trim>false</trim>
        </hudson.model.StringParameterDefinition>
        <hudson.model.StringParameterDefinition>
          <name>tags</name>
          <description>Comma separated key value pairs.
BusinessUnit=GDO,CostCenter=9215
</description>
          <trim>false</trim>
        </hudson.model.StringParameterDefinition>
      </parameterDefinitions>
    </hudson.model.ParametersDefinitionProperty>
  </properties>
  <scm class="hudson.plugins.git.GitSCM" plugin="git@5.2.1">
    <configVersion>2</configVersion>
    <userRemoteConfigs>
      <hudson.plugins.git.UserRemoteConfig>
        <url>https://github.com/manulife-gft/adl_aml.git</url>
        <credentialsId>ce25d359-94c7-4d14-af87-fc6ac6b3b11f</credentialsId>
      </hudson.plugins.git.UserRemoteConfig>
    </userRemoteConfigs>
    <branches>
      <hudson.plugins.git.BranchSpec>
        <name>*/one_cdb</name>
      </hudson.plugins.git.BranchSpec>
    </branches>
    <doGenerateSubmoduleConfigurations>false</doGenerateSubmoduleConfigurations>
    <submoduleCfg class="empty-list"/>
    <extensions/>
  </scm>
  <canRoam>true</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <triggers/>
  <concurrentBuild>false</concurrentBuild>
  <builders>
    <hudson.tasks.Shell>
      <command>cd aks
./scripts/10-aks-provision.py -v DEBUG -c ../config/azure.ini -s $azure_subscription -n $aks_name -r $resource_group -l $location \
-ae $aks_version -au $user_assigned_managed_id \
-av $aks_vm_size -ac $aks_node_count -aa $aks_max_node_count -ai $aks_min_node_count -ap $aks_max_pod_count \
-am $aks_network_mode -as $aks_subnet -t $tags -p $spn_secret</command>
      <configuredLocalRules/>
    </hudson.tasks.Shell>
  </builders>
  <publishers/>
  <buildWrappers>
    <org.jenkinsci.plugins.credentialsbinding.impl.SecretBuildWrapper plugin="credentials-binding@657.v2b_19db_7d6e6d">
      <bindings>
        <org.jenkinsci.plugins.credentialsbinding.impl.StringBinding>
          <credentialsId>${spn_secret_param}</credentialsId>
          <variable>spn_secret</variable>
        </org.jenkinsci.plugins.credentialsbinding.impl.StringBinding>
        <org.jenkinsci.plugins.credentialsbinding.impl.StringBinding>
          <credentialsId>mysql_gdoops</credentialsId>
          <variable>mysql_pass</variable>
        </org.jenkinsci.plugins.credentialsbinding.impl.StringBinding>
      </bindings>
    </org.jenkinsci.plugins.credentialsbinding.impl.SecretBuildWrapper>
  </buildWrappers>
</project>" to type "System.Xml.XmlDocument". Error: "Version number '1.1' is invalid. Line 1, position 16."
[18/309] Processing: AKS Create Namespace
